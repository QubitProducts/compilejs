apply plugin: 'java'

sourceCompatibility = '1.7'
[compileJava, compileTestJava]*.options*.encoding = 'UTF-8'

if (!hasProperty('mainClass')) {
    ext.mainClass = 'com.qubitproducts.compilejs.CompileJS'
}

jar {
    manifest {
        attributes 'Main-Class': 'com.qubitproducts.compilejs.CompileJS'
    }
}

repositories {
    mavenCentral()
}

dependencies {
    testCompile group: 'junit', name: 'junit', version: '4.10'
}

apply plugin: 'maven'
String mavenGroupId = 'com.qubit'
String mavenVersion = ''

String mavenArtifactId = name
group = mavenGroupId
version = mavenVersion

task sourcesJar(type: Jar, 
  dependsOn: classes, 
  description: 'Creates a jar from the source files.') {
  classifier = 'sources'
  from sourceSets.main.allSource
}

artifacts {
  archives jar
  archives sourcesJar
}

configure(install.repositories.mavenInstaller) {
  pom.project {
    groupId = mavenGroupId
    artifactId = mavenArtifactId
    version = mavenVersion
  }
}
